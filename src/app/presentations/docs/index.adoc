:sectnums:
:toclevels: 3
:toc:
:showtitle:
:imagesdir: /images/docs

= Documentation

== Dashboard

.Environmental Dashboard homepage
image::dashboard.screenshot.png[Environmental Dashboard homepage, 100%]

The Environmental Orb Dashboard displays all bulbs and orbs associated with an account (see Figure 1). Any configuration option can be accessed by beginning on this page.

=== Virtual Orbs

Virtual orbs appear on the Environmental Orb Dashboard under “Your Virtual Orbs” (see label 1 in Figure 1). Virtual orbs allow users to pair 1-2 meters together along with other configuration settings (explained in link:#_attributes[Attributes]) to create virtual representations of an Environmental Orb. Virtual orbs can be assigned to bulbs so that the bulb emulates the assigned virtual orb.

==== Creating

On the Environmental Orb Dashboard, click “Create a virtual orb.”

==== Deleting

On the Environmental Orb Dashboard, identify the target orb and click “Delete” beside it. Confirm the deletion on the next page.

==== Attributes

===== Title
Used as a label when assigning a virtual orb to a bulb. Brief and descriptive titles make recognition easy.

===== Meters
The meter(s) to display feedback for. If two meters are selected, the emulation switches every 6 seconds between each.

==== Typical Use Algorithm
Orbs convey information about how current resource use compares to typical resource use at a given time. The typical use algorithm allows days of the week in which typical use is similar to be grouped together. Sample sizes for the algorithm may be configured universally or on a group-by-group basis.


===== Data Groupings
Days of the week where resource usage is expected to be similar may be grouped together to create more accurate feedback. For example, office buildings are occupied less on weekends. Marking weekends and weekdays as separate groups makes for better typical use estimates.

===== Sample size
Data from recent days belonging to the same data group are used to calculate typical use. Sample size dictates how many days of prior data are used. If less data are available than specified, the algorithm will use as much data as it can collect.

=== Bulbs

Bulbs are displayed on the Environmental Orb Dashboard under “Your Bulbs” (see label 2 in Figure 1). The list is gathered by detecting all bulbs claimed on your LIFX account. Without linking your Environmental Orb Account to a LIFX Cloud account, no bulbs will appear in this section.

You can turn a bulb into an Environmental Orb by assigning a virtual orb to it.

==== Controls

===== Turn “On” or “Off”
Turning an orb off disables it while turning an orb on enables it.

===== Assigning an orb
Selecting a virtual orb label in the drop down next a bulb assigns the virtual orb to the bulb.

==== Labelling

For convenient managing, bulbs should be labelled appropriately. When default labels are detected, a notice message will appear on your dashboard. To get rid of this message, custom labels must be entered. Bulb labels cannot be managed through the Environmental Orb interface; they must be edited through the third-party WiFi bulb service. See LIFX's documentation on link:https://support.lifx.com/hc/en-us/articles/213449823-Setting-up-the-LIFX-app["Setting up the LIFX App"] and  link:https://support.lifx.com/hc/en-us/articles/204538340-LIFX-Bulb-Setup["LIFX Bulb Setup."]

===== Label

A brief label for your bulb that describes what the bulb is used for. _Example: Chemistry Building Orb._

===== Location

The location of the bulb. _Example: North wall of atrium._

===== Group

Assign the bulb to a group. _Example: College orbs._

==== Status

Bulb statuses give insight into the Environmental Orb's ability to communicate with a specific bulb. Reference the following table for status definitions.

[.table.table-striped]
[cols="20,80"]
|===

| Disabled | No communication with bulb server. Bulb is turned "Off."

| Ok | Communication with LIFX server is successful and the bulb is online.

| Offline | Communication with bulb server is successful but the bulb is turned off, disconnected from the internet, or otherwise unreachable by the server.

| Timed_out | Communication with bulb server is successful but the bulb's status is unknown. Bulbs with a timed out status should automatically change to an "Ok" or "Offline" status within thirty seconds.

| _Other_ | Bulb statuses partly rely on the third-party WiFi bulb service. If a bulb's status is something other than listed above and not understandable, please contact us.
|===

==== Source

Bulbs are listed by gathering information from the WiFi bulb integrations that are setup in your integration settings (see link:#_third-party_integrations[Third-Party Integrations]). The source field indicates which WiFi bulb integration the bulb is gathered from. The source field uses the integration's label, entered by the front-end user when confirming a WiFi bulb integration.

== Third-Party Integrations

.Integration configuration page
image::integrations.screenshot.png[Integration configuration page, 100%]

The Environmental Orb requires _at least_ two third-party integrations: a building data integration (i.e., BuildingOS by Lucid) and a WiFi light bulb integration (i.e., LIFX). The integration configuration page (see Figure 2) can be accessed by selecting “Integrations” in the header's navigation bar. This section goes through each component and delineates how the online interface allows both building data and WiFi bulbs to be configured.

=== Building Data Integration

The building data integration is used to retrieve resource use data for meters assigned to orbs created in the dashboard. Currently, the only third-party building data platform compatible with the Environmental Orb is BuildingOS by Lucid.

==== Adding

Add a building data integration by selecting “Add new integration” (see near label 1 in Figure 2). The prompt will ask for a username, password, client ID, and client secret. The client ID and secret can be obtained through the API panel on your BuildingOS dashboard. The grant type must be password-based.

==== Removing

To edit or remove your building data integration, please contact Environmental Dashboard.

=== WiFi Light Bulb Integration

The WiFi light bulb integration is used to send commands to light bulbs configured as orbs within the dashboard. Currently, the only third-party light bulb integration platform compatible with the Environmental Orb is LIFX.

==== Adding

Add a light bulb integration by selecting “Add new integration” (see near label 2 in Figure 2). Follow the on-screen instructions to login to LIFX and authorize your account. After completing authorization, a prompt will request a label for the LIFX account just authorized. This label will be used to keep track of the LIFX account integrations associated with your Environmental Orb account.

==== Editing

Edit a light bulb integration by selecting “Edit” (see near label 2 in Figure 2). The only modifiable attribute of bulb integrations is the label chosen.

==== Removing

Remove a light bulb integration by selecting "Delete" (see near label 2 in Figure 2).

==== Labelling

For convenient managing, integrations should be labelled properly. A brief description of the 3rd-party account, or person associated with the 3rd-party account, should be entered as a label. Labels may be edited at any point in time. _Examples: Jim's LIFX, jim.doe@environmentalorb.org's LIFX._

==== Status

Integration statuses give insight into the Environmental Orb server's relationship with the WiFi bulb integration. Reference the following table for status definitions.

[.table.table-striped]
[cols="20,80"]
|===

| Ok | Communication with bulb server is successful.

| Requires authorization | Communication with bulb server failed. Reauthorization is required.

|===

==== “Requires Authorization”

Sometimes after authorizing a LIFX account, the authorization key received by Environmental Orb goes bad. This is expected when using third-party integrations. Reauthorization is required on the event this happens by clicking “Authorize” next to the affected integration.

== Account

.Account configuration and summary page.
image::account-overview.screenshot.png[Account configuration and summary page., 100%]

Account information can be reviewed and changed. Access your Account overview by clicking on the email address of the currently logged-in user in the top right and selecting “Account.”
